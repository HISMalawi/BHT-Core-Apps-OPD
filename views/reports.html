<style>

    #reports-container {
        display: table;
        width: 100%;
        border-collapse: separate;
        border-spacing: 10px;
    }

    .reports-container-row {
        display: table-row;
    }

    .reports-container-cell {
        display: table-cell;
        border-style: solid;

        border: 1px solid #5ca6c4;
        cursor: pointer;
        box-shadow: inset 2px -4px 2px 0px;
        background-color: #5480a8;
        border-radius: 7px;
        border: solid black 3px;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        -moz-box-shadow: inset 0 0 10px #000000;
        -webkit-box-shadow: inset 0 0 10px #5ca6c4;
        box-shadow: inset 0 0 10px #000000;

        width: 300px;
        color: white;
    }

    .report-icons {
        height: 30px;
        width: 30px;
    }

    .info-table {
        padding: 8px;
        color: #fff;
    }

    .under-development {
        position: absolute;
        background-color: black;
        width: 80%;
        height: 90%;
        left: 10%;
        top: 7%;
        z-index: 990;
        opacity: .99;
        border-radius: 14px 14px;
    }

</style>

<script>

    function reportGrouping(group) {
        if (group == 'main') {
            return [
                ['MoH', '/assets/images/login-logos/Malawi-Coat_of_arms_of_arms.png', '#', 'link'],
                ["PEPFAR", "/assets/images/login-logos/PEPFAR.png", "#", 'link'],
                ["Clinic", "", "Clinic", 'function']
            ];
        } else if (group == 'MoH') {
            return [
                ["LA report", "", "#", 'link'],
                ["Drug report", "", "#", 'link'],
                ["Malaria report", "", "#", 'link'],
                ["IPT", "", "#", 'link']
            ];
        } else if (group == 'Clinic') {
            return [
                ['Diagnosis by address', '', 'reports/report_dates.html?report=diagnosis_by_address', 'link'],
                ["Diagnosis", "", "reports/report_dates.html?report=diagnosis", 'link'],
                ["Registration report", "", "reports/report_dates.html?report=registration", 'link'],
                ["LA report", "", "reports/report_dates.html?report=la", 'link'],
                ["Malaria report", "", "reports/report_dates.html?report=malaria_report", 'link'],
                ["Cases seen report", "", "reports/report_dates.html?report=cases_seen", 'link'],
                ["Mental health report", "", "reports/report_dates.html?report=mental_health", 'link'],
                ["Drugs given", "", "reports/report_dates.html?report=drugs_given", 'link'],
                ["Drugs (prescribed and dispensed)", "", "reports/report_dates.html?report=drugs_prescribed_and_given", 'link'],
                ["With NIDs", "", "reports/report_dates.html?report=with_nids", 'link']
            ];
        } else if (group == 'PEPFAR') {
            return [
                ['IDSR report', "/assets/images/login-logos/PEPFAR.png", "PEPFAR", '#', 'link'],
                ["DHIS 2", "/assets/images/login-logos/PEPFAR.png", "PEPFAR", "#", 'link']
            ];
        } else {
        }
    }

    function buildReportLinks(group) {
        var counter = 0;
        var row = null;
        var reportContainer = document.getElementById("reports-container");
        reportContainer.innerHTML = null;

        var reports = reportGrouping(group);

        for (var i = 0; i < reports.length; i++) {
            if (counter == 0) {
                row = document.createElement("div");
                row.setAttribute("class", "reports-container-row");
                reportContainer.appendChild(row);
            }

            var cell = document.createElement("div");
            cell.setAttribute("class", "reports-container-cell");
            var table = document.createElement("table");
            table.setAttribute("class", "info-table");
            var tr = document.createElement("tr");
            table.appendChild(tr);
            var td = document.createElement("td");

            var img = document.createElement("img");
            var imgSRC = reports[i][1];
            imgSRC = imgSRC.length < 1 ? "/apps/OPD/assets/images/reports.png" : imgSRC;
            img.setAttribute("src", imgSRC);
            img.setAttribute("class", "report-icons");
            td.appendChild(img);
            tr.appendChild(td);

            var td = document.createElement("td");
            td.setAttribute("id", i.toString());

            

            if (reports[i][3] == 'link') {
                if (reports[i][2] != '#')
                    cell.setAttribute("onmousedown", "window.top.location='" + reports[i][2] + "'");

            } else {
                cell.setAttribute("onmousedown", "buildReportLinks('" + reports[i][2] + "');");
            }

            if (reports[i][0] == 'Malaria report') {
                cell.setAttribute("onmousedown", "underDevelopmentModal()");
            }

            
            td.innerHTML = reports[i][0];
            tr.appendChild(td);

            cell.appendChild(table);
            row.appendChild(cell)

            counter++;
            if (counter == 3)
                counter = 0;

        }
    }

    function _testFunc() {
        var newURL = window.location.protocol + "//" + window.location.host + reports[parseInt(this.id)][2];
        window.top.location = newURL;
    }

    function underDevelopmentModal() {
        
        console.log("success!");
        //$("#mi-modal").setAttribute('class','rt');
        document.getElementById("mi-modal").style = "display: block;";

    }

    function CloseButton() {
        document.getElementById("mi-modal").style = "display: none;";
    }

</script>


<div id="reports-container"></div>

<script>buildReportLinks('main');</script>

<!-- Modal -->
<div class="modal fade under-development" style="display: none;" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"  aria-hidden="true" id="mi-modal"
    style="width: 60%; margin-left:20%;margin-right: 20%; margin-top: 0;">
    <div class="modal-dialog modal-sm">
       <div style="height: 10%; margin-left: 40%;"><img src="/apps/OPD/assets/images/udimg.png" height="320"></div>
       <div style="margin-left: 7%; margin-top: 18%; color:whitesmoke; font-style: normal;"><h1>Report is under development!</h1></div>
       <button id="ud-id" onmousedown="CloseButton()" style="width: 15%; height: 15%; font-size: 34px; float: right; margin-top: -4%; margin-right: 4%;">Close</button>
    </div>
</div>
<!-- Modal -->
